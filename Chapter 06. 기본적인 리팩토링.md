## 리팩터링

- 함수 추출하기 158p. - 이름 짓기
  - 언제 함수로 묶어야 하는지 의견이 많지만 '목적과 구현'을 분리하는 방식이 가장 합리적으로 보인다. - 무엇을 하는지 기술하던 코드를 '왜' 하는지를 말해주는 코드로 바꿔주자.
  - 코드를 보고 무슨 일을 하는지 파악하는데 오래걸린다면 그 부분을 함수로 추출한 뒤 '무슨 일'을 하는지 걸맞는 이름을 짓는다. (길이는 중요치 않다 - 한 줄일지라도)
- 변수 추출하기 - 이름 짓기

  - 함수 안에서 사용되는 표현식이 복잡한 경우 이름을 지어야 한다. / 넓은 문맥에서 사용된다면 함수로 추출하자.

- 함수 인라인하기
  - 함수 본문이 이름만큼 명확한 경우
  - 위임하기만 하는 함수들이 너무 많아 위임 관계가 복잡한 경우
- 변수 인라인하기

- 함수 선언바꾸기 - 이름 바꾸기, 인수 추가 및 제거
- 변수 이름 바꾸기
- 변수 캡슐화하기
  - 데이터의 유효범위가 넓을수록 캡슐화 해야 한다.
  - 데이터 변경 전 검증이나 변경 후 로직을 추가하기 쉽다.
- 매개변수 객체 만들기
  - 데이터 뭉치를 데이터 구조로 묶으면 데이터 사이의 관계가 명확해진다.
  - 이 리팩터링을 통해 다음과 같은 효과를 얻을 수 있다. **_데이터 구조를 만들어 데이터 구조와 함수를 합쳐 클래스로 만들거나 데이터구조에 공통으로 적용되는 동작을 추출해서 함수로 만들 수도 있다._** 즉 새로운 추상개념이 되면서 코드의 개념적인 그림을 다시 그릴 수도 있다.

### 클래스 또는 변환 함수로 묶을지는 프로그램 문맥을 넓게 살펴보고 정해야 한다.

### 원본 데이터가 코드 안에서 갱신된다면 클래스로 묶는 편이 낫다. 변환 함수로 묶으면 가공한 데이터를 새로운 레코드에 저장하므로, 원본 데이터가 수정되면 일관성이 깨질 수 있다.

- 여러 함수를 클래스로 묶기
  - 클래스로 묶을 때의 장점은 클라이언트가 객체의 데이터를 변경할 수 있고 파생 객체들을 일관되게 관리할 수 있다.
- 여러 함수를 변환 함수로 묶기 - 읽기전용 데이터를 다룰 때 특히 좋다.

  - 원본 데이터를 입력 받아 필요한 정보를 모두 도출한 뒤, 각각을 출력 데이터의 필드에 넣어 반환.
  - 원본 데이터를 변경하지 않도록 주의한다. - 복사된 데이터는 상관없다.
  - 본질은 같고 부가 정보가 덧붙여진 변환 함수는 "enrich"라 하고 형태가 변할때는 transform이라는 이름을 붙인다.

- 단계 쪼개기
  - 서로 다른 두 대상을 한꺼번에 다루는 코드를 각 모듈로 나눈다.
  - 두 대상을 동시에 생각할 필요 없이 하나에만 집중할 수 있다.
