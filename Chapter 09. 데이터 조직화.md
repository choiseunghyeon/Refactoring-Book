## TIP

- 데이터 구조는 무슨 일이 벌어지는지 이해하는 열쇠다. 따라서 깔끔하게 관리해야 한다. 개발이 진행될 수록 데이터를 더 잘 이해하기도 하는데 이때, 깊어진 이해를 프로그램에 반드시 반영해야 한다.
- 리팩터링 도중 테스트에 실패한다면 더 작은 단계로 나눠 진행해야 한다는 신호다.

## 용어 정리

```javascript
let arr = []; // 수집 변수 collecting variable
for (let i = 0; i < 10; i++) {
  // i 는 루프 변수 loop variable
  arr.push(i);
}
```

- 변수 쪼개기

  - 하나의 값이 여러 목적으로 사용되면 혼란과 버그를 낳는다.
  - 대입이 두 번 이상 이뤄진다면 여러 가지 역할을 수행한다는 신호다.(쪼개자) - 루프 변수, 수집 변수 제외
  - 역할 하나당 변수 하나

- 필드 이름 바꾸기
- 파생 변수를 질의 함수로 바꾸기
  - 계산 과정을 보여주는 코드가 데이터의 의미를 분명히 드러내는 경우가 자주 있다.(피연산자 데이터가 불변이라면 안해도 된다.)
  - 새로운 데이터 구조를 생성하는 변형 연산(transformation operation)에는 두 가지가 있다.
  - 첫째, 데이터 구조를 감싸며 그 데이터에 기초하여 계산한 결과를 속성으로 제공하는 객체(6.10 여러 함수를 변환 함수로 묶기) - 6.9절도 마찬가지
  - 둘째, 데이터 구조를 받아 다른 데이터 구조로 변환해 반환하는 함수
- 참조를 값으로 바꾸기

  - 객체(데이터 구조)를 다른 객체(데이터 구조)에 중첩하면 내부 객체를 참조 혹은 값으로 취급할 수 있다.
  - 참조냐 값이냐의 차이는 내부 객체의 속성을 갱신하는 방식에서 알 수 있다. (참조는 그 객체의 속성만 갱신 - 값은 새로운 속성을 담은 객체로 기존 내부 객체를 통째로 대체)
  - 값으로 다룬다면 내부 객체의 클래스를 수정하여 값 객체(Value Object - 불변)로 만들 수 있다. - 값 객체는 불변이기 때문에 프로그램 외부로 건네줘도 값이 바뀌어도 내부에 영향을 주지 않아서 안전하다.(분산 시스템과 동시성 시스템에서 유용)
  - 값 객체로 인정받으려면 동치성을 값 기반으로 평가해야 한다.

- 값을 참조로 바꾸기
  - 값으로 사용하고 있을 때 모든 데이터를 갱신해야 한다면 참조로 바꿔주자.
- 매직 리터럴 바꾸기
  - 코드의 의미를 알기 어려운 리터럴은 매직 리터럴 바꾸기로 명확하게 바꿔준다.
